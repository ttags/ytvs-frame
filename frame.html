<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Content Viewer</title>

<meta name="robots" content="noindex, nofollow">
<meta name="referrer" content="no-referrer">

<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #000;
    overflow: hidden;
  }

  #content-frame {
    width: 100%;
    height: 100%;
    border: 0;
  }

  .fallback {
    color: #ccc;
    font-family: system-ui, sans-serif;
    text-align: center;
    padding-top: 20%;
    display: none;
  }
</style>
</head>

<body>

<iframe
  id="content-frame"
  allow="autoplay; fullscreen; encrypted-media"
  allowfullscreen>
</iframe>

<div id="fallback" class="fallback">
  Content unavailable.
</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const refParam = params.get('ref');

  const contentFrame = document.getElementById('content-frame');
  const fallback = document.getElementById('fallback');

  if (!refParam) {
    fallback.style.display = 'block';
  } else {
    try {
      const target = new URL(refParam);

      // hard allowlist (important)
      const allowedHosts = [
        'yonotvs.pages.dev'
      ];

      if (!allowedHosts.includes(target.hostname)) {
        throw new Error('Blocked');
      }

      contentFrame.src = refParam;
    } catch (e) {
      fallback.style.display = 'block';
    }
  }
</script>

</body>
</html>
